<!DOCTYPE html>
<html>
<head>
  <meta name="baidu-site-verification" content="NYLpcPZ0IA" />
  <meta name="google-site-verification" content="CUZytgvRujBHA2YWbgTY5Vneztie0eSScCxKCUXxOVw" />
  <meta charset="utf-8">
  
  <title>maven项目配置mybatis的一些问题记录 | 月生无界的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1、maven项目mybatis依赖包配置（使用3.3.0版本的mybatis）12345&amp;lt;dependency&amp;gt;	&amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;	&amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;	&amp;lt;version&amp;gt;3.3.0&amp;lt;/version&amp;gt;&amp;lt;/depende">
<meta property="og:type" content="article">
<meta property="og:title" content="maven项目配置mybatis的一些问题记录">
<meta property="og:url" content="http://yueshengwujie.cn/2017/04/05/maven项目配置mybatis的一些问题记录/index.html">
<meta property="og:site_name" content="月生无界的博客">
<meta property="og:description" content="1、maven项目mybatis依赖包配置（使用3.3.0版本的mybatis）12345&amp;lt;dependency&amp;gt;	&amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;	&amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;	&amp;lt;version&amp;gt;3.3.0&amp;lt;/version&amp;gt;&amp;lt;/depende">
<meta property="og:updated_time" content="2017-04-18T06:39:26.140Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="maven项目配置mybatis的一些问题记录">
<meta name="twitter:description" content="1、maven项目mybatis依赖包配置（使用3.3.0版本的mybatis）12345&amp;lt;dependency&amp;gt;	&amp;lt;groupId&amp;gt;org.mybatis&amp;lt;/groupId&amp;gt;	&amp;lt;artifactId&amp;gt;mybatis&amp;lt;/artifactId&amp;gt;	&amp;lt;version&amp;gt;3.3.0&amp;lt;/version&amp;gt;&amp;lt;/depende">
  
    <link rel="alternative" href="/atom.xml" title="月生无界的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="/photo/head.png" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">月生无界</a></h1>
		</hgroup>

		
		<p class="header-subtitle">无界伴月生，星辉纵天宇</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/yueshengwujie" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/yueshengwujie" title="weibo">weibo</a>
					        
								<a class="oschina" target="_blank" href="https://my.oschina.net/yueshengwujie/blog" title="oschina">oschina</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/FreeSWITCH/" style="font-size: 20px;">FreeSWITCH</a> <a href="/tags/PSTN/" style="font-size: 10px;">PSTN</a> <a href="/tags/SIP/" style="font-size: 10px;">SIP</a> <a href="/tags/VoIP/" style="font-size: 10px;">VoIP</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java实体类/" style="font-size: 10px;">java实体类</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/回溯算法/" style="font-size: 10px;">回溯算法</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/幻方/" style="font-size: 10px;">幻方</a> <a href="/tags/数独/" style="font-size: 10px;">数独</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/自动生成/" style="font-size: 10px;">自动生成</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">作为一名程序猿，我内心仍拥有诗人般的优雅，也许我的人生，在转角处选错了方向，但我从未后悔！</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">月生无界</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/photo/head.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">月生无界</h1>
			</hgroup>
			
			<p class="header-subtitle">无界伴月生，星辉纵天宇</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/yueshengwujie" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/yueshengwujie" title="weibo">weibo</a>
			        
						<a class="oschina" target="_blank" href="https://my.oschina.net/yueshengwujie/blog" title="oschina">oschina</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-maven项目配置mybatis的一些问题记录" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/05/maven项目配置mybatis的一些问题记录/" class="article-date">
  	<time datetime="2017-04-05T09:15:51.000Z" itemprop="datePublished">2017-04-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      maven项目配置mybatis的一些问题记录
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis/">mybatis</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1、maven项目mybatis依赖包配置（使用3-3-0版本的mybatis）"><a href="#1、maven项目mybatis依赖包配置（使用3-3-0版本的mybatis）" class="headerlink" title="1、maven项目mybatis依赖包配置（使用3.3.0版本的mybatis）"></a>1、maven项目mybatis依赖包配置（使用3.3.0版本的mybatis）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">	&lt;groupId&gt;org.mybatis&lt;/groupId&gt;</div><div class="line">	&lt;artifactId&gt;mybatis&lt;/artifactId&gt;</div><div class="line">	&lt;version&gt;3.3.0&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<hr>
<h3 id="2、mybatis配置文件"><a href="#2、mybatis配置文件" class="headerlink" title="2、mybatis配置文件"></a>2、mybatis配置文件</h3><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</div><div class="line">&lt;configuration&gt;</div><div class="line"></div><div class="line">	&lt;typeAliases&gt;&lt;!-- 别名配置，对应项目中的实体类，在sql.xml中可以直接使用别名对应到实体类 --&gt;</div><div class="line">		&lt;typeAlias alias=&quot;User&quot; type=&quot;com.test.domain.User&quot; /&gt;</div><div class="line">	&lt;/typeAliases&gt;</div><div class="line"></div><div class="line">	&lt;environments default=&quot;development&quot;&gt;&lt;!-- 数据库环境配置 --&gt;</div><div class="line">		&lt;environment id=&quot;development&quot;&gt;</div><div class="line">			&lt;transactionManager type=&quot;JDBC&quot; /&gt;</div><div class="line">			&lt;dataSource type=&quot;POOLED&quot;&gt;&lt;!-- 这种数据源的实现利用“池”的概念将JDBC连接对象组织起来， 避免了创建先的连接实例时所必须的初始化和认证时间。 </div><div class="line">					这是一种使得并发WEb应用快速响应请求的流行的处理方式。 UNPOOLED - 这个数据源的实现只是每次请求时打开和关闭连接。 --&gt;</div><div class="line">				&lt;property name=&quot;driver&quot; value=&quot;org.postgresql.Driver&quot; /&gt;</div><div class="line">				&lt;property name=&quot;url&quot; value=&quot;jdbc:postgresql://192.168.1.69:5432/li_db&quot; /&gt;</div><div class="line">				&lt;property name=&quot;username&quot; value=&quot;dbuser&quot; /&gt;</div><div class="line">				&lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;</div><div class="line">			&lt;/dataSource&gt;</div><div class="line">		&lt;/environment&gt;</div><div class="line">	&lt;/environments&gt;</div><div class="line"></div><div class="line">	&lt;!-- 通过resource加载单个映射文件 --&gt;</div><div class="line">	&lt;mappers&gt;</div><div class="line">		&lt;mapper resource=&quot;com/unionbon/youlb/http/mapping/Base.xml&quot; /&gt;</div><div class="line">		&lt;mapper resource=&quot;com/unionbon/youlb/http/mapping/User.xml&quot; /&gt;</div><div class="line">	&lt;/mappers&gt;</div><div class="line">	&lt;!-- 需要将mapper接口类名和mapper.xml映射文件名称保持一致且在同一个目录中， 注意：要使用的是mapper代理。两个文件要在同一个目录 --&gt;</div><div class="line">&lt;!-- 	&lt;mappers&gt;</div><div class="line">		&lt;mapper class=&quot;com.test.mapping.UserMapper&quot; /&gt;</div><div class="line">	&lt;/mappers&gt; --&gt;</div><div class="line">	&lt;!-- 需要将mapper接口类名和mapper.xml映射文件名称保持一致且在同一个目录中， 注意：要使用的是mapper代理。两个文件要在同一个目录 --&gt;</div><div class="line">&lt;!-- 	&lt;mappers&gt;</div><div class="line">		&lt;package name=&quot;com.test.mapping&quot; /&gt;</div><div class="line">	&lt;/mappers&gt; --&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<p>文件为xml格式文件，可以直接放在maven项目的src/main/resources，这样读取的时候比较方便，<br>configuration节点里面的子节点是有顺序的，例如：mappers不能放在typeAliases前面，<br>子节点如果顺序有误，会报错，可将鼠标放在报错位置查看正确的子节点顺序。</p>
<hr>
<h3 id="3、读取mybatis配置文件，获取SqlSession"><a href="#3、读取mybatis配置文件，获取SqlSession" class="headerlink" title="3、读取mybatis配置文件，获取SqlSession"></a>3、读取mybatis配置文件，获取SqlSession</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">public static void main(String[] args)&#123;  </div><div class="line">        SqlSessionFactory sqlSessionFactory = null;  </div><div class="line">        SqlSession session = null;  </div><div class="line">        String resource = &quot;Configuration.xml&quot;;//配置文件所在路径</div><div class="line">        InputStream inputStream;  </div><div class="line">        try &#123;  </div><div class="line">            inputStream = Resources.getResourceAsStream(resource); //获取文件流</div><div class="line">            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);  //建立SqlSessionFactory则只需要启动项目初始化一次就行。</div><div class="line"></div><div class="line">            session = sqlSessionFactory.openSession();  //获取SqlSession都是线程不安全的，</div><div class="line">            System.out.println(session);  </div><div class="line">            User user = (User)session.selectOne(&quot;cn.bj.mybatis.models.UserMapper.selectUser&quot;,1); //调用查询方法 </div><div class="line">            System.out.println(user.getId());  </div><div class="line">            System.out.println(user.getUsername());</div><div class="line">            //非查询方法需手动提交session.commit();</div><div class="line">        &#125; catch (IOException e) &#123;  </div><div class="line">            e.printStackTrace();  </div><div class="line">        &#125;finally&#123;  </div><div class="line">            if(session != null)&#123;  </div><div class="line">                session.close();  //关闭SqlSession</div><div class="line">            &#125;  </div><div class="line">        &#125;  </div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>以上只是测试mybatis配置文件是否正确的方法，在项目中，需要进行简单的封装，<br>而每一个SqlSession都是线程不安全的，SqlSessionFactory的工具类：则只需要启动项目初始化一次就行。<br>SqlSessionFactory的工具类：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">package com.test.utils;</div><div class="line"></div><div class="line">import java.io.Reader;</div><div class="line"></div><div class="line">import org.apache.ibatis.io.Resources;</div><div class="line">import org.apache.ibatis.session.SqlSessionFactory;</div><div class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</div><div class="line">/**</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * @author lmshe</div><div class="line"> * @time 2017年3月28日</div><div class="line"> * @desc 初始化SqlSessionFactory</div><div class="line"> */</div><div class="line">public class MyBatisUtil&#123;</div><div class="line">	private MyBatisUtil()&#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	private static final String RESOURCE = &quot;mybatis-config.xml&quot;;//mybatis配置文件所在路径</div><div class="line">	private static SqlSessionFactory sqlSessionFactory = null;</div><div class="line">	//使用静态块初始化SqlSessionFactory</div><div class="line">	static &#123;</div><div class="line">		Reader reader = null;</div><div class="line">		try &#123;</div><div class="line">			reader = Resources.getResourceAsReader(RESOURCE);</div><div class="line">			SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();</div><div class="line">			sqlSessionFactory = builder.build(reader);</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月28日</div><div class="line">	 * @desc 获取SqlSessionFactory</div><div class="line">	 */</div><div class="line">	public static SqlSessionFactory getSqlSessionFactory()&#123;</div><div class="line">		return sqlSessionFactory;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h3 id="4、mybatis的CRUD的简单封装"><a href="#4、mybatis的CRUD的简单封装" class="headerlink" title="4、mybatis的CRUD的简单封装"></a>4、mybatis的CRUD的简单封装</h3><p>对于spring MVC等主流框架项目来说，直接引入liuzh封装的Mapper，已经封装好大部分CRUD方法，当然更方便，<br>但是由于本人项目是main函数启动，并没有使用spring MVC，所以在抉择下，决定参考网上资料，自己封装部分CRUD，</p>
<p>（1）如何封装通用的BaseDao<br>mybatis通过配置可以将sql.xml和dao映射起来，通过xml中的id，能执行xml中的sql，<br>如果需要通用的方法，就需要使用泛型，然后产生CRUD的sql，直接传入xml中，执行，<br>mybatis框架提供的可以将参数传入，使用#{参数名}来获取传入的参数，<br>同时也提供了另一种方法，将sql传入，但是获取sql的方式与获取参数不同，使用${sql}，<br>那么，重要的工作，就是如何使用泛型产生sql。</p>
<p>（2）定义BaseDao<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">package com.test.mapper;</div><div class="line"></div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">public interface IBaseMapper&lt;T,PK&gt; &#123;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * 根据主键删除记录</div><div class="line">	 * 物理删除，无法恢复</div><div class="line">	 */</div><div class="line">	int deleteByPrimaryKey(PK id);</div><div class="line">	/**</div><div class="line">	 * 插入记录</div><div class="line">	 * 字段为空，不插入</div><div class="line">	 */</div><div class="line">    int insertSelective(T obj);</div><div class="line">    /**</div><div class="line">     * 根据主键更新记录</div><div class="line">     * 字段为空，不更新</div><div class="line">     */</div><div class="line">    int updateByPrimaryKeySelective(T obj);</div><div class="line">    /**</div><div class="line">     * 根据主键查询</div><div class="line">     * 此查询方法仅适用于表主键字段名为“id”，且其它字段以“f”开始</div><div class="line">     */</div><div class="line">    T selectByPrimaryKey(PK id);</div><div class="line">    /**</div><div class="line">     * 条件查询</div><div class="line">     * 此查询方法仅适用于表主键字段名为“id”，且其它字段以“f”开始</div><div class="line">     */</div><div class="line">    T selectByParams(T obj);</div><div class="line">    /**</div><div class="line">     * 条件查询 </div><div class="line">     * 此查询方法仅适用于表主键字段名为“id”，且其它字段以“f”开始</div><div class="line">     */</div><div class="line">    List&lt;T&gt; selectList(T obj);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>（3）定义Base.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</div><div class="line">&lt;mapper namespace=&quot;com.test.mapper.IBaseMapper&quot;&gt;</div><div class="line">	&lt;!-- 删除数据 --&gt;</div><div class="line">	&lt;delete id=&quot;deleteByPrimaryKey&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/delete&gt;</div><div class="line">	&lt;!-- 插入数据 --&gt;</div><div class="line">	&lt;insert id=&quot;insertSelective&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/insert&gt;</div><div class="line">	&lt;!-- 根据主键更新记录 --&gt;</div><div class="line">	&lt;update id=&quot;updateByPrimaryKeySelective&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/update&gt;</div><div class="line">	&lt;!-- 根据主键查询记录 --&gt;</div><div class="line">	&lt;select id=&quot;selectByPrimaryKey&quot; resultType=&quot;hashMap&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/select&gt;</div><div class="line">	&lt;!-- 条件查询记录 --&gt;</div><div class="line">	&lt;select id=&quot;selectByParams&quot; resultType=&quot;hashmap&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/select&gt;</div><div class="line">	&lt;!-- 查询记录列表 --&gt;</div><div class="line">	&lt;select id=&quot;selectList&quot; resultType=&quot;hashmap&quot;&gt;</div><div class="line">		$&#123;value&#125;</div><div class="line">	&lt;/select&gt;</div><div class="line">&lt;/mapper&gt;</div></pre></td></tr></table></figure></p>
<p>（4）BaseDao实现类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line">package com.test.mapper.impl;</div><div class="line"></div><div class="line">import java.lang.reflect.ParameterizedType;</div><div class="line">import java.lang.reflect.Type;</div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line">import java.util.Map;</div><div class="line"></div><div class="line">import org.mybatis.spring.support.SqlSessionDaoSupport;</div><div class="line"></div><div class="line">import com.test.mapper.IBaseMapper;</div><div class="line">import com.test.utils.MyBatisUtil;</div><div class="line">import com.test.utils.ReflectionUtils;</div><div class="line">import com.test.utils.SQLGeneratorUtils;</div><div class="line"></div><div class="line">public class BaseMapperImpl&lt;T,PK&gt; extends SqlSessionDaoSupport implements IBaseMapper&lt;T,PK&gt;&#123;</div><div class="line"></div><div class="line">	SQLGeneratorUtils&lt;T, PK&gt; sqlGeneratorUtils = new SQLGeneratorUtils&lt;T, PK&gt;();</div><div class="line">	private Class&lt;T&gt; entityClass;</div><div class="line"></div><div class="line">	@SuppressWarnings(&quot;unchecked&quot;)</div><div class="line">	public BaseMapperImpl() &#123;  </div><div class="line">		super.setSqlSessionFactory(MyBatisUtil.getSqlSessionFactory());</div><div class="line">		Type genType = getClass().getGenericSuperclass();  </div><div class="line">		Type[] params = ((ParameterizedType) genType).getActualTypeArguments();  </div><div class="line">		entityClass = (Class&lt;T&gt;) params[0];  </div><div class="line">	&#125;  </div><div class="line"></div><div class="line">	@Override</div><div class="line">	public int deleteByPrimaryKey(PK id) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.deleteByPrimaryKey(entityClass,id);</div><div class="line">		return this.getSqlSession().delete(&quot;deleteByPrimaryKey&quot;,sql);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public int insertSelective(T obj) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.insertSelective(obj);</div><div class="line">		return this.getSqlSession().insert(&quot;insertSelective&quot;,sql);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public int updateByPrimaryKeySelective(T obj) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.updateByPrimaryKeySelective(obj);</div><div class="line">		return this.getSqlSession().update(&quot;updateByPrimaryKeySelective&quot;,sql);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public T selectByPrimaryKey(PK id) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.selectByPrimaryKey(entityClass,id);</div><div class="line">		Map&lt;String, Object&gt; resultMap = this.getSqlSession().selectOne(&quot;selectByPrimaryKey&quot;,sql);</div><div class="line">		if(resultMap != null)&#123;</div><div class="line">			return handleResult(resultMap,entityClass);</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public T selectByParams(T obj) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.selectByParams(obj);</div><div class="line">		Map&lt;String, Object&gt; resultMap = this.getSqlSession().selectOne(&quot;selectByParams&quot;,sql);</div><div class="line">		if(resultMap != null)&#123;</div><div class="line">			return handleResult(resultMap,entityClass);</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public List&lt;T&gt; selectList(T obj) &#123;</div><div class="line">		String sql = sqlGeneratorUtils.selectByParams(obj);</div><div class="line">		List&lt;Map&lt;String,Object&gt;&gt; resultMapList = this.getSqlSession().selectList(&quot;selectList&quot;,sql);</div><div class="line">		if(resultMapList != null)&#123;</div><div class="line">	        List&lt;T&gt; tList = new ArrayList&lt;T&gt;(resultMapList.size());</div><div class="line">	        for (Map&lt;String, Object&gt; resultMap : resultMapList) &#123;</div><div class="line">	            T t = handleResult(resultMap, entityClass);</div><div class="line">	            tList.add(t);</div><div class="line">	        &#125;</div><div class="line">			return tList;</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param resultMap</div><div class="line">	 * @param tClazz</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月31日</div><div class="line">	 * @desc 处理查询结果</div><div class="line">	 */</div><div class="line">	private T handleResult(Map&lt;String, Object&gt; resultMap, Class&lt;T&gt; tClazz) &#123;</div><div class="line">		T t = null;</div><div class="line">		try &#123;</div><div class="line">			t = tClazz.newInstance();</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			logger.error(&quot;/********************************&quot;);</div><div class="line">			logger.error(&quot;封装查询结果时，实例化对象(&quot; + this.entityClass + &quot;)时，出现异常!&quot;</div><div class="line">					+ e.getMessage());</div><div class="line">			logger.error(&quot;/********************************&quot;);</div><div class="line">		&#125;</div><div class="line">		for (Map.Entry&lt;String, Object&gt; entry : resultMap.entrySet()) &#123;</div><div class="line">			String key = entry.getKey();</div><div class="line">			Object val = entry.getValue();</div><div class="line">			ReflectionUtils.invokeSetterMethod(t, key, val);</div><div class="line">		&#125;</div><div class="line">		return t;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>关于基类Dao的实现，其实为了偷懒，而使用了spring的SqlSessionDaoSupport，<br>不然每个方法都要开SqlSession，关SqlSession，烦死，<br>由于没有使用spring配置，所以其实需要将SqlSessionFactory注入才可以正常调用，<br>于是使用了构造方法来实现，这样就可以使用this.getSqlSession()来直接调用方法，<br>而其中产生sql使用了另外一个工具类，关于实体类与泛型使用反射工具类来处理，<br>将Map对象转成实体类对象</p>
<p>（5）产生sql工具类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div></pre></td><td class="code"><pre><div class="line">package com.test.utils;</div><div class="line"></div><div class="line">import java.lang.reflect.Field;</div><div class="line">import java.util.Date;</div><div class="line"></div><div class="line">import javax.persistence.Column;</div><div class="line">import javax.persistence.Id;</div><div class="line">import javax.persistence.Table;</div><div class="line"></div><div class="line">import org.apache.commons.lang.StringUtils;</div><div class="line"></div><div class="line">public class SQLGeneratorUtils&lt;T,PK&gt; &#123;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param id</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月29日</div><div class="line">	 * @desc 根据id删除记录，兼容id为Integer</div><div class="line">	 */</div><div class="line">	public String deleteByPrimaryKey(Class&lt;T&gt; entityClass,PK id)&#123;</div><div class="line">		String sql = &quot;&quot;;</div><div class="line">		try &#123;</div><div class="line">			Table table = entityClass.getAnnotation(Table.class);</div><div class="line">			if(table == null)&#123;</div><div class="line">				 throw new RuntimeException(&quot;类-&quot;+ entityClass + &quot;,未用@Table注解标识!!&quot;);</div><div class="line">			&#125;</div><div class="line">			String tableName = table.name();</div><div class="line">			Field[] fields = entityClass.getDeclaredFields();</div><div class="line">			String pkName = &quot;&quot;;</div><div class="line">			for(Field field : fields)&#123;</div><div class="line">				field.setAccessible(true);</div><div class="line">				if(field.getAnnotation(Id.class) != null)&#123;</div><div class="line">					Column col = field.getAnnotation(Column.class);</div><div class="line">					pkName = col.name();</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			if(StringUtils.isNotBlank(pkName))&#123;</div><div class="line">				sql += &quot;DELETE FROM &quot; + tableName + &quot; where &quot; + pkName + &quot;=&quot; + handleValue(id);</div><div class="line">			&#125;</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param obj</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月29日</div><div class="line">	 * @desc 插入记录，字段不为空的插入</div><div class="line">	 *</div><div class="line">	 */</div><div class="line">	public String insertSelective(T obj)&#123;</div><div class="line">		String sql = &quot;&quot;;</div><div class="line">		try &#123;</div><div class="line">			Class&lt;?&gt; entityClass = obj.getClass();</div><div class="line">			Table table = entityClass.getAnnotation(Table.class);</div><div class="line">			if(table == null)&#123;</div><div class="line">				 throw new RuntimeException(&quot;类-&quot;+ entityClass + &quot;,未用@Table注解标识!!&quot;);</div><div class="line">			&#125;</div><div class="line">			String tableName = table.name();</div><div class="line">			Field[] fields = entityClass.getDeclaredFields();</div><div class="line">			String columnsStr = &quot;&quot;;</div><div class="line">			String paramStr = &quot;&quot;;</div><div class="line">			for(Field field : fields)&#123;</div><div class="line">				field.setAccessible(true);</div><div class="line">				Object param = field.get(obj);</div><div class="line">				Column col = field.getAnnotation(Column.class);</div><div class="line">				if(param != null &amp;&amp; col != null)&#123;</div><div class="line">					param = this.handleValue(param);</div><div class="line">					columnsStr += &quot;,&quot;+col.name();</div><div class="line">					paramStr += &quot;,&quot;+param;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			sql += &quot;INSERT INTO &quot; + tableName + &quot;(&quot; + columnsStr.substring(1) + &quot;)values(&quot; + paramStr.substring(1) + &quot;)&quot;;</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalAccessException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param obj</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月29日</div><div class="line">	 * @desc 根据主键更新记录，字段为空，不更新</div><div class="line">	 */</div><div class="line">	public String updateByPrimaryKeySelective(T obj)&#123;</div><div class="line">		String sql = &quot;&quot;;</div><div class="line">		try &#123;</div><div class="line">			Class&lt;?&gt; entityClass = obj.getClass();</div><div class="line">			Table table = entityClass.getAnnotation(Table.class);</div><div class="line">			if(table == null)&#123;</div><div class="line">				 throw new RuntimeException(&quot;类-&quot;+ entityClass + &quot;,未用@Table注解标识!!&quot;);</div><div class="line">			&#125;</div><div class="line">			String tableName = table.name();</div><div class="line">			Field[] fields = entityClass.getDeclaredFields();</div><div class="line">			String sqlStr = &quot;&quot;;</div><div class="line">			String pkName = &quot;&quot;;</div><div class="line">			Object pkValue = &quot;&quot;;</div><div class="line">			for(Field field : fields)&#123;</div><div class="line">				field.setAccessible(true);</div><div class="line">				Object param = field.get(obj);</div><div class="line">				Column col = field.getAnnotation(Column.class);</div><div class="line">				if(field.getAnnotation(Id.class) != null)&#123;</div><div class="line">					if(param != null &amp;&amp; col != null)&#123;</div><div class="line">						pkValue = this.handleValue(param);</div><div class="line">						pkName = col.name();</div><div class="line">					&#125;else&#123;</div><div class="line">						throw new RuntimeException(&quot;主键不能为空！&quot;);</div><div class="line">					&#125;</div><div class="line">				&#125;else&#123;</div><div class="line">					if(param != null &amp;&amp; col != null)&#123;</div><div class="line">						param = this.handleValue(param);</div><div class="line">						sqlStr += &quot;,&quot;+col.name() + &quot;=&quot;+param;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			sql += &quot;update &quot; + tableName + &quot; set &quot; + sqlStr.substring(1) + &quot; where &quot; + pkName + &quot;=&quot; + pkValue;</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalAccessException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param entityClass</div><div class="line">	 * @param id</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月30日</div><div class="line">	 * @desc 根据主键查询</div><div class="line">	 */</div><div class="line">	public String selectByPrimaryKey(Class&lt;T&gt; entityClass,PK id)&#123;</div><div class="line">		String sql = &quot;&quot;;</div><div class="line">		try &#123;</div><div class="line">			Table table = entityClass.getAnnotation(Table.class);</div><div class="line">			if(table == null)&#123;</div><div class="line">				 throw new RuntimeException(&quot;类-&quot;+ entityClass + &quot;,未用@Table注解标识!!&quot;);</div><div class="line">			&#125;</div><div class="line">			String tableName = table.name();</div><div class="line">			Field[] fields = entityClass.getDeclaredFields();</div><div class="line">			String pkName = &quot;&quot;;</div><div class="line">			for(Field field : fields)&#123;</div><div class="line">				field.setAccessible(true);</div><div class="line">				if(field.getAnnotation(Id.class) != null)&#123;</div><div class="line">					Column col = field.getAnnotation(Column.class);</div><div class="line">					pkName = col.name();</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			sql += &quot;select * from &quot; + tableName + &quot; where &quot; + pkName + &quot;=&quot; + handleValue(id);</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param obj</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月30日</div><div class="line">	 * @desc 条件查询</div><div class="line">	 */</div><div class="line">	public String selectByParams(T obj)&#123;</div><div class="line">		String sql = &quot;&quot;;</div><div class="line">		try &#123;</div><div class="line">			Class&lt;?&gt; entityClass = obj.getClass();</div><div class="line">			Table table = entityClass.getAnnotation(Table.class);</div><div class="line">			if(table == null)&#123;</div><div class="line">				 throw new RuntimeException(&quot;类-&quot;+ entityClass + &quot;,未用@Table注解标识!!&quot;);</div><div class="line">			&#125;</div><div class="line">			String tableName = table.name();</div><div class="line">			Field[] fields = entityClass.getDeclaredFields();</div><div class="line">			String sqlWhereStr = &quot;&quot;;</div><div class="line">			for(Field field : fields)&#123;</div><div class="line">				field.setAccessible(true);</div><div class="line">				Object param = field.get(obj);</div><div class="line">				Column col = field.getAnnotation(Column.class);</div><div class="line">				if(param != null &amp;&amp; col != null)&#123;</div><div class="line">					param = this.handleValue(param);</div><div class="line">					sqlWhereStr += &quot; and &quot;+col.name() + &quot;=&quot;+param;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			sql += &quot;select * from &quot; + tableName + &quot; where &quot; + sqlWhereStr.substring(4);</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalAccessException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * @param param</div><div class="line">	 * @return</div><div class="line">	 * @author lmshe</div><div class="line">	 * @time 2017年3月29日</div><div class="line">	 * @desc 处理param</div><div class="line">	 */</div><div class="line">    private Object handleValue(Object param) &#123;</div><div class="line">        if (param instanceof String || param instanceof Date) &#123;</div><div class="line">        	param = &quot;\&apos;&quot; + param + &quot;\&apos;&quot;;</div><div class="line">        &#125;else if (param instanceof Boolean) &#123;</div><div class="line">            Boolean v = (Boolean) param;</div><div class="line">            param = v ? 1 : 0;</div><div class="line">        &#125;</div><div class="line">        return param;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>（6）反射工具类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div></pre></td><td class="code"><pre><div class="line">package com.test.utils;</div><div class="line"></div><div class="line">import java.lang.reflect.Field;</div><div class="line">import java.lang.reflect.InvocationTargetException;</div><div class="line">import java.lang.reflect.Method;</div><div class="line">import java.math.BigDecimal;</div><div class="line">import java.math.BigInteger;</div><div class="line">import java.sql.Timestamp;</div><div class="line">import java.text.ParseException;</div><div class="line">import java.text.SimpleDateFormat;</div><div class="line">import java.util.Date;</div><div class="line">import java.util.HashMap;</div><div class="line">import java.util.Map;</div><div class="line"></div><div class="line">import org.apache.commons.lang.StringUtils;</div><div class="line">import org.slf4j.Logger;</div><div class="line">import org.slf4j.LoggerFactory;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Description:反射工具类</div><div class="line"> */</div><div class="line">public abstract class ReflectionUtils &#123;</div><div class="line">    </div><div class="line">    private static final Logger    logger    = LoggerFactory</div><div class="line">            .getLogger(ReflectionUtils.class);</div><div class="line">    /**</div><div class="line">     * 缓存方法</div><div class="line">     */</div><div class="line">    private static final Map&lt;Class&lt;?&gt;, Method[]&gt;    METHODS_CACHEMAP    = new HashMap&lt;Class&lt;?&gt;, Method[]&gt;();</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 反射 取值、设值,合并两个对象(Field same only )</div><div class="line">     * </div><div class="line">     * @param from</div><div class="line">     * @param to</div><div class="line">     */</div><div class="line">    public static &lt;T&gt; void copyProperties(T fromobj, T toobj,</div><div class="line">            String... fieldspec) &#123;</div><div class="line">        for (String filename : fieldspec) &#123;</div><div class="line">            Object val = ReflectionUtils.invokeGetterMethod(fromobj, filename);</div><div class="line">            ReflectionUtils.invokeSetterMethod(toobj, filename, val);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 调用Getter方法</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     *            对象</div><div class="line">     * @param propertyName</div><div class="line">     *            属性名</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Object invokeGetterMethod(Object obj, String propertyName) &#123;</div><div class="line">        String getterMethodName = &quot;get&quot; + capitalize(propertyName);</div><div class="line">        return invokeMethod(obj, getterMethodName, null, null);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 调用Setter方法,不指定参数的类型</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param propertyName</div><div class="line">     * @param value</div><div class="line">     */</div><div class="line">    public static void invokeSetterMethod(Object obj, String propertyName,</div><div class="line">            Object value) &#123;</div><div class="line">        invokeSetterMethod(obj, propertyName, value, null);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 调用Setter方法,指定参数的类型</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param propertyName  字段名</div><div class="line">     * @param value</div><div class="line">     * @param propertyType</div><div class="line">     *            为空，则取value的Class</div><div class="line">     */</div><div class="line">    public static void invokeSetterMethod(Object obj, String propertyName,</div><div class="line">            Object value, Class&lt;?&gt; propertyType) &#123;</div><div class="line">        value = handleValueType(obj,propertyName,value);</div><div class="line">        propertyType = propertyType != null ? propertyType : value.getClass();</div><div class="line">        String setterMethodName = &quot;set&quot; + capitalize(propertyName);</div><div class="line">        invokeMethod(obj, setterMethodName, new Class&lt;?&gt;[] &#123; propertyType &#125;,</div><div class="line">                new Object[] &#123; value &#125;);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    private static Object handleValueType(Object obj, String propertyName,</div><div class="line">            Object value)&#123;</div><div class="line">        String getterMethodName = &quot;get&quot; + capitalize(propertyName);</div><div class="line">        Class&lt;?&gt; argsType = value.getClass();;</div><div class="line">        Class&lt;?&gt; returnType = obtainAccessibleMethod(obj, getterMethodName).getReturnType();</div><div class="line">        if(argsType == returnType)&#123;</div><div class="line">            return value;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        if (returnType == Boolean.class) &#123;</div><div class="line">            String temp = value.toString();</div><div class="line">            value = (StringUtils.isNotBlank(temp) &amp;&amp; Long.valueOf(temp) &gt; 0) ? true : false;</div><div class="line">        &#125; else if (returnType == Long.class) &#123;</div><div class="line">            value = Long.valueOf(value.toString());</div><div class="line">        &#125;else if(returnType == Date.class)&#123;</div><div class="line">            try &#123;</div><div class="line">                value = SimpleDateFormat.getDateInstance().parse(value.toString());</div><div class="line">            &#125; catch (ParseException e) &#123;</div><div class="line">                logger.error(&quot;类型转型Timpestap--&gt;Date时，发生错误! &quot; + e.getMessage() + &quot;(&quot;+value.toString()+&quot;)&quot;);</div><div class="line">            &#125;</div><div class="line">        &#125; else if (returnType == Short.class) &#123;</div><div class="line">            value = Short.valueOf(value.toString());</div><div class="line">        &#125; else if (returnType == BigDecimal.class) &#123;</div><div class="line">            value = BigDecimal.valueOf(Long.valueOf(value.toString()));</div><div class="line">        &#125; else if (returnType == BigInteger.class) &#123;</div><div class="line">            value = BigInteger.valueOf(Long.valueOf(value.toString()));</div><div class="line">        &#125; else if(returnType == String.class)&#123;</div><div class="line">            value = String.valueOf(value);</div><div class="line">        &#125;else if(returnType == Integer.class)&#123;</div><div class="line">            value = Integer.valueOf(value.toString());</div><div class="line">        &#125;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    public static void main(String[] args) throws Exception &#123;</div><div class="line">        Timestamp ts = new Timestamp(System.currentTimeMillis());</div><div class="line">        System.out.println(SimpleDateFormat.getDateInstance().parse(ts.toString()));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 直接调用对象方法，忽视private/protected修饰符</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param methodName</div><div class="line">     * @param parameterTypes</div><div class="line">     * @param params</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Object invokeMethod(final Object obj,</div><div class="line">            final String methodName, final Class&lt;?&gt;[] parameterTypes,</div><div class="line">            final Object[] args) &#123;</div><div class="line">        Method method = obtainAccessibleMethod(obj, methodName, parameterTypes);</div><div class="line">        if (method == null) &#123; throw new IllegalArgumentException(</div><div class="line">                &quot;Devkit: Could not find method [&quot; + methodName</div><div class="line">                        + &quot;] on target [&quot; + obj + &quot;].&quot;); &#125;</div><div class="line">        try &#123;</div><div class="line">            return method.invoke(obj, args);</div><div class="line">        &#125; catch (IllegalAccessException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (IllegalArgumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (InvocationTargetException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 循环向上转型，获取对象的DeclaredMethod,并强制设置为可访问 如向上转型到Object仍无法找到，返回null</div><div class="line">     * </div><div class="line">     * 用于方法需要被多次调用的情况，先使用本函数先取得Method,然后调用Method.invoke(Object obj,Object...</div><div class="line">     * args)</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param methodName</div><div class="line">     * @param parameterTypes</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Method obtainAccessibleMethod(final Object obj,</div><div class="line">            final String methodName, final Class&lt;?&gt;... parameterTypes) &#123;</div><div class="line">        Class&lt;?&gt; superClass = obj.getClass();</div><div class="line">        Class&lt;Object&gt; objClass = Object.class;</div><div class="line">        for (; superClass != objClass; superClass = superClass.getSuperclass()) &#123;</div><div class="line">            Method method = null;</div><div class="line">            try &#123;</div><div class="line">                method = superClass.getDeclaredMethod(methodName,</div><div class="line">                        parameterTypes);</div><div class="line">                method.setAccessible(true);</div><div class="line">                return method;</div><div class="line">            &#125; catch (NoSuchMethodException e) &#123;</div><div class="line">                // Method不在当前类定义，向上转型</div><div class="line">            &#125; catch (SecurityException e) &#123;</div><div class="line">                // Method不在当前类定义，向上转型</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 不能确定方法是否包含参数时，通过方法名匹配获得方法</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param methodName</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Method obtainMethod(final Object obj, final String methodName) &#123;</div><div class="line">        Class&lt;?&gt; clazz = obj.getClass();</div><div class="line">        Method[] methods = METHODS_CACHEMAP.get(clazz);</div><div class="line">        if (methods == null) &#123; // 尚未缓存</div><div class="line">            methods = clazz.getDeclaredMethods();</div><div class="line">            METHODS_CACHEMAP.put(clazz, methods);</div><div class="line">        &#125;</div><div class="line">        for (Method method : methods) &#123;</div><div class="line">            if (method.getName().equals(methodName))</div><div class="line">                return method;</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 直接读取对象属性值 忽视private/protected修饰符，不经过getter函数</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param fieldName</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Object obtainFieldValue(final Object obj,</div><div class="line">            final String fieldName) &#123;</div><div class="line">        Field field = obtainAccessibleField(obj, fieldName);</div><div class="line">        if (field == null) &#123; throw new IllegalArgumentException(</div><div class="line">                &quot;Devkit: could not find field [&quot; + fieldName + &quot;] on target [&quot;</div><div class="line">                        + obj + &quot;]&quot;); &#125;</div><div class="line">        Object retval = null;</div><div class="line">        try &#123;</div><div class="line">            retval = field.get(obj);</div><div class="line">        &#125; catch (IllegalArgumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (IllegalAccessException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return retval;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 直接设置对象属性值 忽视private/protected修饰符，不经过setter函数</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param fieldName</div><div class="line">     * @param value</div><div class="line">     */</div><div class="line">    public static void setFieldValue(final Object obj, final String fieldName,</div><div class="line">            final Object value) &#123;</div><div class="line">        Field field = obtainAccessibleField(obj, fieldName);</div><div class="line">        if (field == null) &#123; throw new IllegalArgumentException(</div><div class="line">                &quot;Devkit: could not find field [&quot; + fieldName + &quot;] on target [&quot;</div><div class="line">                        + obj + &quot;]&quot;); &#125;</div><div class="line">        try &#123;</div><div class="line">            field.set(obj, value);</div><div class="line">        &#125; catch (IllegalArgumentException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125; catch (IllegalAccessException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    /**</div><div class="line">     * 循环向上转型，获取对象的DeclaredField,并强制设为可访问 如向上转型Object仍无法找到，返回null</div><div class="line">     * </div><div class="line">     * @param obj</div><div class="line">     * @param fieldName</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static Field obtainAccessibleField(final Object obj,</div><div class="line">            final String fieldName) &#123;</div><div class="line">        Class&lt;?&gt; superClass = obj.getClass();</div><div class="line">        Class&lt;Object&gt; objClass = Object.class;</div><div class="line">        for (; superClass != objClass; superClass = superClass.getSuperclass()) &#123;</div><div class="line">            try &#123;</div><div class="line">                Field field = superClass.getDeclaredField(fieldName);</div><div class="line">                field.setAccessible(true);</div><div class="line">                return field;</div><div class="line">            &#125; catch (NoSuchFieldException e) &#123;</div><div class="line">                // Field不在当前类定义，向上转型</div><div class="line">            &#125; catch (SecurityException e) &#123;</div><div class="line">                // Field不在当前类定义，向上转型</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * </div><div class="line">     * @param str</div><div class="line">     * @return</div><div class="line">     * @author lmshe</div><div class="line">     * @time 2017年3月31日</div><div class="line">     * @desc 处理属性字段</div><div class="line">     */</div><div class="line">    private static String capitalize(String str)&#123;</div><div class="line">    	if(!&quot;id&quot;.equals(str))&#123;</div><div class="line">    		while (str.indexOf(&quot;_&quot;) &gt; 0) &#123;</div><div class="line">    			int index = str.indexOf(&quot;_&quot;);</div><div class="line">    			str = str.substring(0, index) + str.substring(index + 1, index + 2).toUpperCase() + str.substring(index + 2);</div><div class="line">    		&#125;</div><div class="line">    		str = str.substring(1);</div><div class="line">    	&#125;</div><div class="line">    	return str = StringUtils.capitalize(str);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<h3 id="注意与参考"><a href="#注意与参考" class="headerlink" title="注意与参考"></a>注意与参考</h3><p>由于本人的数据库表名是以t_开头，且所有字段名，都是用“f”开头，所以在使用反射工具类的时候，<br>修改最后的capitalize()方法，适应自己用的表，<br>如果已经在xml中配置了resultMap，则不需要在配置文件配置别名，适用与表字段名与实体类属性名不一致的情况</p>
<p><a href="http://www.open-open.com/lib/view/1389149511078#articleHeader3" target="_blank" rel="external">Mybatis封装简单的CRUD</a></p>
<hr>
<h3 id="寄语"><a href="#寄语" class="headerlink" title="寄语"></a>寄语</h3><p>我低眉，藏起眼角的悲伤，笑颜渐起</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/10/自动生成java实体类的工具类/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          自动生成java实体类的工具类
        
      </div>
    </a>
  
  
    <a href="/2017/03/13/玩玩幻方/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">玩玩幻方</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>




  
  
  <div class="netease">
	<div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
	<script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
	<script>
	var cloudTieConfig = {
	  url: document.location.href, 
	  sourceId: "",
	  productKey: "1c6127ae2baa4deaa5d74bfda378e785",
	  target: "cloud-tie-wrapper"
	};
	var yunManualLoad = true;
	Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
	</script>
</div>


  


</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 月生无界
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>